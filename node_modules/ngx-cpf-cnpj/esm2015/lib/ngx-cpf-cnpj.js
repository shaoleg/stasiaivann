export class NgxCpfCnpj {
    constructor() { }
    static convertToCpfCnpj(num) {
        if (num && num.length > 3 && num.length <= 14) {
            const replaceByLength = {
                4: { searchValue: /(\d+)(\d{3})/, newValue: "$1.$2" },
                5: { searchValue: /(\d+)(\d{3})/, newValue: "$1.$2" },
                6: { searchValue: /(\d+)(\d{3})/, newValue: "$1.$2" },
                7: { searchValue: /(\d+)(\d{3})(\d{3})/, newValue: "$1.$2.$3" },
                8: { searchValue: /(\d+)(\d{3})(\d{3})/, newValue: "$1.$2.$3" },
                9: { searchValue: /(\d+)(\d{3})(\d{3})/, newValue: "$1.$2.$3" },
                10: {
                    searchValue: /(\d+)(\d{3})(\d{3})(\d{1})/,
                    newValue: "$1.$2.$3-$4"
                },
                11: {
                    searchValue: /(\d+)(\d{3})(\d{3})(\d{2})/,
                    newValue: "$1.$2.$3-$4"
                },
                12: {
                    searchValue: /(\d+)(\d{3})(\d{3})(\d{4})/,
                    newValue: "$1.$2.$3-$4"
                },
                13: {
                    searchValue: /(\d+)(\d{3})(\d{3})(\d{4})(\d{2})/,
                    newValue: "$1.$2.$3/$4-$5"
                },
                14: {
                    searchValue: /(\d+)(\d{3})(\d{3})(\d{4})(\d{2})/,
                    newValue: "$1.$2.$3/$4-$5"
                }
            };
            num = num.toString();
            num = NgxCpfCnpj.getDigitos(num);
            const replaceObject = replaceByLength[num.length];
            num = num.replace(replaceObject.searchValue, replaceObject.newValue);
        }
        return num;
    }
    static getDigitos(value) {
        const regex = new RegExp("\\D", "g");
        return value.replace(regex, "");
    }
    static cpfIsValid(value) {
        // Só faz a validação se o texto não for vazio.
        // Se for vazio, validar campo requerido não é a responsabilidade desta validação
        if (value.length > 0) {
            let IsValid = false;
            const cpf = NgxCpfCnpj.getDigitos(value); // Obtém o texto digitado no campo, remove tudo menos os digitos
            if (cpf.length === 11) {
                // Se digitou o CPF por completo
                // Verificação dos CPF's que não respeitam a regra de validação mas não são válidos
                const cpf_invalidos = [
                    "00000000000",
                    "11111111111",
                    "22222222222",
                    "33333333333",
                    "44444444444",
                    "55555555555",
                    "66666666666",
                    "77777777777",
                    "88888888888",
                    "99999999999"
                ];
                for (let i = 0; i < 10; i++) {
                    if (cpf === cpf_invalidos[i]) {
                        return IsValid;
                    }
                }
                // Calculando o Primeiro Dígito Verificador
                let soma = 0; // Soma para o CPF "ABC.DEF.GHI-XZ": (A*10)+(B*9)+...+(H*3)+(I*2)
                for (let i = 0; i < 9; i++) {
                    soma = soma + parseInt(cpf.charAt(i), 10) * (10 - i);
                }
                let dv = 0; // Primeiro dígito verificador (será zero se o resto da divisão de soma por 11 for < 2)
                if (soma % 11 > 1) {
                    dv = 11 - (soma % 11);
                }
                if (parseInt(cpf.charAt(9), 10) !== dv) {
                    return IsValid;
                }
                // Calculando o Segundo Dígito Verificador
                soma = 0; // Soma para o CPF "ABC.DEF.GHI-XZ": (A*11)+(B*10)+...+(H*4)+(I*3)+(X*2)
                for (let i = 0; i < 10; i++) {
                    soma = soma + parseInt(cpf.charAt(i), 10) * (11 - i);
                }
                dv = 0; // Segundo dígito verificador (será zero se o resto da divisão de soma por 11 for < 2)
                if (soma % 11 > 1) {
                    dv = 11 - (soma % 11);
                }
                if (parseInt(cpf.charAt(10), 10) !== dv) {
                    return IsValid;
                }
                IsValid = true;
            }
            return IsValid;
        }
        return true;
    }
    static cnpjIsValid(value) {
        // Só faz a validação se o texto não for vazio.
        // Se for vazio, validar campo requerido não é a responsabilidade desta validação
        if (value.length > 0) {
            let IsValid = false;
            const cnpj = NgxCpfCnpj.getDigitos(value); // Obtém o texto digitado no campo, remove tudo menos os digitos
            if (cnpj.length === 14) {
                // Se digitou o CNPJ por completo
                // Verificação do CNPJ que não respeita a regra de validação mas não são válidos
                if (cnpj === "00000000000000") {
                    return IsValid;
                }
                // Calculando o Primeiro Dígito Verificador
                let soma = 0; // Soma para o CNPJ "AB.CDE.FGH/IJKL-XZ": (A*5)+(B*4)+(C*3)+(D*2)+(E*9)+(F*8)+...+(K*3)+(L*2)
                let mult = 5; // multiplicador
                for (let i = 0; i < 12; i++) {
                    soma = soma + parseInt(cnpj.charAt(i), 10) * mult;
                    mult--; // decrementa o multiplicador
                    if (mult === 1) {
                        mult = 9;
                    } // volta o multiplicador para o valor 9 (para decrementar até o valor 2)
                }
                let dv = 0; // Primeiro dígito verificador (será zero se o resto da divisão de soma por 11 for < 2)
                if (soma % 11 > 1) {
                    dv = 11 - (soma % 11);
                }
                if (parseInt(cnpj.charAt(12), 10) !== dv) {
                    return IsValid;
                }
                // Calculando o Segundo Dígito Verificador
                soma = 0; // Soma para o CNPJ "AB.CDE.FGH/IJKL-XZ": (A*6)+(B*5)+(C*4)+(D*3)+(E*2)+(F*9)+...+(K*4)+(L*3)+(X*2)
                mult = 6; // multiplicador
                for (let i = 0; i < 13; i++) {
                    soma = soma + parseInt(cnpj.charAt(i), 10) * mult;
                    mult--; // decrementa o multiplicador
                    if (mult === 1) {
                        mult = 9;
                    } // volta o multiplicador para o valor 9 (para decrementar até o valor 2)
                }
                dv = 0; // Segundo dígito verificador (será zero se o resto da divisão de soma por 11 for < 2)
                if (soma % 11 > 1) {
                    dv = 11 - (soma % 11);
                }
                if (parseInt(cnpj.charAt(13), 10) !== dv) {
                    return IsValid;
                }
                IsValid = true;
            }
            return IsValid;
        }
        return true;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWNwZi1jbnBqLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LWNwZi1jbnBqLyIsInNvdXJjZXMiOlsibGliL25neC1jcGYtY25wai50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLE9BQU8sVUFBVTtJQUNyQixnQkFBZSxDQUFDO0lBRVQsTUFBTSxDQUFDLGdCQUFnQixDQUFDLEdBQUc7UUFDaEMsSUFBSSxHQUFHLElBQUksR0FBRyxDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksR0FBRyxDQUFDLE1BQU0sSUFBSSxFQUFFLEVBQUU7WUFDN0MsTUFBTSxlQUFlLEdBQUc7Z0JBQ3RCLENBQUMsRUFBRSxFQUFFLFdBQVcsRUFBRSxjQUFjLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRTtnQkFDckQsQ0FBQyxFQUFFLEVBQUUsV0FBVyxFQUFFLGNBQWMsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFO2dCQUNyRCxDQUFDLEVBQUUsRUFBRSxXQUFXLEVBQUUsY0FBYyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUU7Z0JBQ3JELENBQUMsRUFBRSxFQUFFLFdBQVcsRUFBRSxxQkFBcUIsRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUFFO2dCQUMvRCxDQUFDLEVBQUUsRUFBRSxXQUFXLEVBQUUscUJBQXFCLEVBQUUsUUFBUSxFQUFFLFVBQVUsRUFBRTtnQkFDL0QsQ0FBQyxFQUFFLEVBQUUsV0FBVyxFQUFFLHFCQUFxQixFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUU7Z0JBQy9ELEVBQUUsRUFBRTtvQkFDRixXQUFXLEVBQUUsNEJBQTRCO29CQUN6QyxRQUFRLEVBQUUsYUFBYTtpQkFDeEI7Z0JBQ0QsRUFBRSxFQUFFO29CQUNGLFdBQVcsRUFBRSw0QkFBNEI7b0JBQ3pDLFFBQVEsRUFBRSxhQUFhO2lCQUN4QjtnQkFDRCxFQUFFLEVBQUU7b0JBQ0YsV0FBVyxFQUFFLDRCQUE0QjtvQkFDekMsUUFBUSxFQUFFLGFBQWE7aUJBQ3hCO2dCQUNELEVBQUUsRUFBRTtv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LHNGQUFzRjtnQkFDOUYsSUFBSSxJQUFJLEdBQUcsRUFBRSxHQUFHLENBQUMsRUFBRTtvQkFDakIsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLElBQUksR0FBRyxFQUFFLENBQUMsQ0FBQztpQkFDdkI7Z0JBQ0QsSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUU7b0JBQ3hDLE9BQU8sT0FBTyxDQUFDO2lCQUNoQjtnQkFFRCxPQUFPLEdBQUcsSUFBSSxDQUFDO2FBQ2hCO1lBQ0QsT0FBTyxPQUFPLENBQUM7U0FDaEI7UUFDRCxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBOZ3hDcGZDbnBqIHtcclxuICBjb25zdHJ1Y3RvcigpIHt9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgY29udmVydFRvQ3BmQ25waihudW0pIHtcclxuICAgIGlmIChudW0gJiYgbnVtLmxlbmd0aCA+IDMgJiYgbnVtLmxlbmd0aCA8PSAxNCkge1xyXG4gICAgICBjb25zdCByZXBsYWNlQnlMZW5ndGggPSB7XHJcbiAgICAgICAgNDogeyBzZWFyY2hWYWx1ZTogLyhcXGQrKShcXGR7M30pLywgbmV3VmFsdWU6IFwiJDEuJDJcIiB9LFxyXG4gICAgICAgIDU6IHsgc2VhcmNoVmFsdWU6IC8oXFxkKykoXFxkezN9KS8sIG5ld1ZhbHVlOiBcIiQxLiQyXCIgfSxcclxuICAgICAgICA2OiB7IHNlYXJjaFZhbHVlOiAvKFxcZCspKFxcZHszfSkvLCBuZXdWYWx1ZTogXCIkMS4kMlwiIH0sXHJcbiAgICAgICAgNzogeyBzZWFyY2hWYWx1ZTogLyhcXGQrKShcXGR7M30pKFxcZHszfSkvLCBuZXdWYWx1ZTogXCIkMS4kMi4kM1wiIH0sXHJcbiAgICAgICAgODogeyBzZWFyY2hWYWx1ZTogLyhcXGQrKShcXGR7M30pKFxcZHszfSkvLCBuZXdWYWx1ZTogXCIkMS4kMi4kM1wiIH0sXHJcbiAgICAgICAgOTogeyBzZWFyY2hWYWx1ZTogLyhcXGQrKShcXGR7M30pKFxcZHszfSkvLCBuZXdWYWx1ZTogXCIkMS4kMi4kM1wiIH0sXHJcbiAgICAgICAgMTA6IHtcclxuICAgICAgICAgIHNlYXJjaFZhbHVlOiAvKFxcZCspKFxcZHszfSkoXFxkezN9KShcXGR7MX0pLyxcclxuICAgICAgICAgIG5ld1ZhbHVlOiBcIiQxLiQyLiQzLSQ0XCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIDExOiB7XHJcbiAgICAgICAgICBzZWFyY2hWYWx1ZTogLyhcXGQrKShcXGR7M30pKFxcZHszfSkoXFxkezJ9KS8sXHJcbiAgICAgICAgICBuZXdWYWx1ZTogXCIkMS4kMi4kMy0kNFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICAxMjoge1xyXG4gICAgICAgICAgc2VhcmNoVmFsdWU6IC8oXFxkKykoXFxkezN9KShcXGR7M30pKFxcZHs0fSkvLFxyXG4gICAgICAgICAgbmV3VmFsdWU6IFwiJDEuJDIuJDMtJDRcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgMTM6IHtcclxuICAgICAgICAgIHNlYXJjaFZhbHVlOiAvKFxcZCspKFxcZHszfSkoXFxkezN9KShcXGR7NH0pKFxcZHsyfSkvLFxyXG4gICAgICAgICAgbmV3VmFsdWU6IFwiJDEuJDIuJDMvJDQtJDVcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgMTQ6IHtcclxuICAgICAgICAgIHNlYXJjaFZhbHVlOiAvKFxcZCspKFxcZHszfSkoXFxkezN9KShcXGR7NH0pKFxcZHsyfSkvLFxyXG4gICAgICAgICAgbmV3VmFsdWU6IFwiJDEuJDIuJDMvJDQtJDVcIlxyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIG51bSA9IG51bS50b1N0cmluZygpO1xyXG4gICAgICBudW0gPSBOZ3hDcGZDbnBqLmdldERpZ2l0b3MobnVtKTtcclxuICAgICAgY29uc3QgcmVwbGFjZU9iamVjdCA9IHJlcGxhY2VCeUxlbmd0aFtudW0ubGVuZ3RoXTtcclxuICAgICAgbnVtID0gbnVtLnJlcGxhY2UocmVwbGFjZU9iamVjdC5zZWFyY2hWYWx1ZSwgcmVwbGFjZU9iamVjdC5uZXdWYWx1ZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVtO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBnZXREaWdpdG9zKHZhbHVlKSB7XHJcbiAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoXCJcXFxcRFwiLCBcImdcIik7XHJcbiAgICByZXR1cm4gdmFsdWUucmVwbGFjZShyZWdleCwgXCJcIik7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGNwZklzVmFsaWQodmFsdWUpOiBib29sZWFuIHtcclxuICAgIC8vIFPDsyBmYXogYSB2YWxpZGHDp8OjbyBzZSBvIHRleHRvIG7Do28gZm9yIHZhemlvLlxyXG4gICAgLy8gU2UgZm9yIHZhemlvLCB2YWxpZGFyIGNhbXBvIHJlcXVlcmlkbyBuw6NvIMOpIGEgcmVzcG9uc2FiaWxpZGFkZSBkZXN0YSB2YWxpZGHDp8Ojb1xyXG4gICAgaWYgKHZhbHVlLmxlbmd0aCA+IDApIHtcclxuICAgICAgbGV0IElzVmFsaWQgPSBmYWxzZTtcclxuICAgICAgY29uc3QgY3BmID0gTmd4Q3BmQ25wai5nZXREaWdpdG9zKHZhbHVlKTsgLy8gT2J0w6ltIG8gdGV4dG8gZGlnaXRhZG8gbm8gY2FtcG8sIHJlbW92ZSB0dWRvIG1lbm9zIG9zIGRpZ2l0b3NcclxuICAgICAgaWYgKGNwZi5sZW5ndGggPT09IDExKSB7XHJcbiAgICAgICAgLy8gU2UgZGlnaXRvdSBvIENQRiBwb3IgY29tcGxldG9cclxuICAgICAgICAvLyBWZXJpZmljYcOnw6NvIGRvcyBDUEYncyBxdWUgbsOjbyByZXNwZWl0YW0gYSByZWdyYSBkZSB2YWxpZGHDp8OjbyBtYXMgbsOjbyBzw6NvIHbDoWxpZG9zXHJcbiAgICAgICAgY29uc3QgY3BmX2ludmFsaWRvcyA9IFtcclxuICAgICAgICAgIFwiMDAwMDAwMDAwMDBcIixcclxuICAgICAgICAgIFwiMTExMTExMTExMTFcIixcclxuICAgICAgICAgIFwiMjIyMjIyMjIyMjJcIixcclxuICAgICAgICAgIFwiMzMzMzMzMzMzMzNcIixcclxuICAgICAgICAgIFwiNDQ0NDQ0NDQ0NDRcIixcclxuICAgICAgICAgIFwiNTU1NTU1NTU1NTVcIixcclxuICAgICAgICAgIFwiNjY2NjY2NjY2NjZcIixcclxuICAgICAgICAgIFwiNzc3Nzc3Nzc3NzdcIixcclxuICAgICAgICAgIFwiODg4ODg4ODg4ODhcIixcclxuICAgICAgICAgIFwiOTk5OTk5OTk5OTlcIlxyXG4gICAgICAgIF07XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XHJcbiAgICAgICAgICBpZiAoY3BmID09PSBjcGZfaW52YWxpZG9zW2ldKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBJc1ZhbGlkO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2FsY3VsYW5kbyBvIFByaW1laXJvIETDrWdpdG8gVmVyaWZpY2Fkb3JcclxuICAgICAgICBsZXQgc29tYSA9IDA7IC8vIFNvbWEgcGFyYSBvIENQRiBcIkFCQy5ERUYuR0hJLVhaXCI6IChBKjEwKSsoQio5KSsuLi4rKEgqMykrKEkqMilcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDk7IGkrKykge1xyXG4gICAgICAgICAgc29tYSA9IHNvbWEgKyBwYXJzZUludChjcGYuY2hhckF0KGkpLCAxMCkgKiAoMTAgLSBpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGR2ID0gMDsgLy8gUHJpbWVpcm8gZMOtZ2l0byB2ZXJpZmljYWRvciAoc2Vyw6EgemVybyBzZSBvIHJlc3RvIGRhIGRpdmlzw6NvIGRlIHNvbWEgcG9yIDExIGZvciA8IDIpXHJcbiAgICAgICAgaWYgKHNvbWEgJSAxMSA+IDEpIHtcclxuICAgICAgICAgIGR2ID0gMTEgLSAoc29tYSAlIDExKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChwYXJzZUludChjcGYuY2hhckF0KDkpLCAxMCkgIT09IGR2KSB7XHJcbiAgICAgICAgICByZXR1cm4gSXNWYWxpZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENhbGN1bGFuZG8gbyBTZWd1bmRvIETDrWdpdG8gVmVyaWZpY2Fkb3JcclxuICAgICAgICBzb21hID0gMDsgLy8gU29tYSBwYXJhIG8gQ1BGIFwiQUJDLkRFRi5HSEktWFpcIjogKEEqMTEpKyhCKjEwKSsuLi4rKEgqNCkrKEkqMykrKFgqMilcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcclxuICAgICAgICAgIHNvbWEgPSBzb21hICsgcGFyc2VJbnQoY3BmLmNoYXJBdChpKSwgMTApICogKDExIC0gaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGR2ID0gMDsgLy8gU2VndW5kbyBkw61naXRvIHZlcmlmaWNhZG9yIChzZXLDoSB6ZXJvIHNlIG8gcmVzdG8gZGEgZGl2aXPDo28gZGUgc29tYSBwb3IgMTEgZm9yIDwgMilcclxuICAgICAgICBpZiAoc29tYSAlIDExID4gMSkge1xyXG4gICAgICAgICAgZHYgPSAxMSAtIChzb21hICUgMTEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHBhcnNlSW50KGNwZi5jaGFyQXQoMTApLCAxMCkgIT09IGR2KSB7XHJcbiAgICAgICAgICByZXR1cm4gSXNWYWxpZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIElzVmFsaWQgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBJc1ZhbGlkO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGNucGpJc1ZhbGlkKHZhbHVlKTogYm9vbGVhbiB7XHJcbiAgICAvLyBTw7MgZmF6IGEgdmFsaWRhw6fDo28gc2UgbyB0ZXh0byBuw6NvIGZvciB2YXppby5cclxuICAgIC8vIFNlIGZvciB2YXppbywgdmFsaWRhciBjYW1wbyByZXF1ZXJpZG8gbsOjbyDDqSBhIHJlc3BvbnNhYmlsaWRhZGUgZGVzdGEgdmFsaWRhw6fDo29cclxuICAgIGlmICh2YWx1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGxldCBJc1ZhbGlkID0gZmFsc2U7XHJcbiAgICAgIGNvbnN0IGNucGogPSBOZ3hDcGZDbnBqLmdldERpZ2l0b3ModmFsdWUpOyAvLyBPYnTDqW0gbyB0ZXh0byBkaWdpdGFkbyBubyBjYW1wbywgcmVtb3ZlIHR1ZG8gbWVub3Mgb3MgZGlnaXRvc1xyXG5cclxuICAgICAgaWYgKGNucGoubGVuZ3RoID09PSAxNCkge1xyXG4gICAgICAgIC8vIFNlIGRpZ2l0b3UgbyBDTlBKIHBvciBjb21wbGV0b1xyXG4gICAgICAgIC8vIFZlcmlmaWNhw6fDo28gZG8gQ05QSiBxdWUgbsOjbyByZXNwZWl0YSBhIHJlZ3JhIGRlIHZhbGlkYcOnw6NvIG1hcyBuw6NvIHPDo28gdsOhbGlkb3NcclxuICAgICAgICBpZiAoY25waiA9PT0gXCIwMDAwMDAwMDAwMDAwMFwiKSB7XHJcbiAgICAgICAgICByZXR1cm4gSXNWYWxpZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENhbGN1bGFuZG8gbyBQcmltZWlybyBEw61naXRvIFZlcmlmaWNhZG9yXHJcbiAgICAgICAgbGV0IHNvbWEgPSAwOyAvLyBTb21hIHBhcmEgbyBDTlBKIFwiQUIuQ0RFLkZHSC9JSktMLVhaXCI6IChBKjUpKyhCKjQpKyhDKjMpKyhEKjIpKyhFKjkpKyhGKjgpKy4uLisoSyozKSsoTCoyKVxyXG4gICAgICAgIGxldCBtdWx0ID0gNTsgLy8gbXVsdGlwbGljYWRvclxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTI7IGkrKykge1xyXG4gICAgICAgICAgc29tYSA9IHNvbWEgKyBwYXJzZUludChjbnBqLmNoYXJBdChpKSwgMTApICogbXVsdDtcclxuICAgICAgICAgIG11bHQtLTsgLy8gZGVjcmVtZW50YSBvIG11bHRpcGxpY2Fkb3JcclxuICAgICAgICAgIGlmIChtdWx0ID09PSAxKSB7XHJcbiAgICAgICAgICAgIG11bHQgPSA5O1xyXG4gICAgICAgICAgfSAvLyB2b2x0YSBvIG11bHRpcGxpY2Fkb3IgcGFyYSBvIHZhbG9yIDkgKHBhcmEgZGVjcmVtZW50YXIgYXTDqSBvIHZhbG9yIDIpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBkdiA9IDA7IC8vIFByaW1laXJvIGTDrWdpdG8gdmVyaWZpY2Fkb3IgKHNlcsOhIHplcm8gc2UgbyByZXN0byBkYSBkaXZpc8OjbyBkZSBzb21hIHBvciAxMSBmb3IgPCAyKVxyXG4gICAgICAgIGlmIChzb21hICUgMTEgPiAxKSB7XHJcbiAgICAgICAgICBkdiA9IDExIC0gKHNvbWEgJSAxMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwYXJzZUludChjbnBqLmNoYXJBdCgxMiksIDEwKSAhPT0gZHYpIHtcclxuICAgICAgICAgIHJldHVybiBJc1ZhbGlkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2FsY3VsYW5kbyBvIFNlZ3VuZG8gRMOtZ2l0byBWZXJpZmljYWRvclxyXG4gICAgICAgIHNvbWEgPSAwOyAvLyBTb21hIHBhcmEgbyBDTlBKIFwiQUIuQ0RFLkZHSC9JSktMLVhaXCI6IChBKjYpKyhCKjUpKyhDKjQpKyhEKjMpKyhFKjIpKyhGKjkpKy4uLisoSyo0KSsoTCozKSsoWCoyKVxyXG4gICAgICAgIG11bHQgPSA2OyAvLyBtdWx0aXBsaWNhZG9yXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMzsgaSsrKSB7XHJcbiAgICAgICAgICBzb21hID0gc29tYSArIHBhcnNlSW50KGNucGouY2hhckF0KGkpLCAxMCkgKiBtdWx0O1xyXG4gICAgICAgICAgbXVsdC0tOyAvLyBkZWNyZW1lbnRhIG8gbXVsdGlwbGljYWRvclxyXG4gICAgICAgICAgaWYgKG11bHQgPT09IDEpIHtcclxuICAgICAgICAgICAgbXVsdCA9IDk7XHJcbiAgICAgICAgICB9IC8vIHZvbHRhIG8gbXVsdGlwbGljYWRvciBwYXJhIG8gdmFsb3IgOSAocGFyYSBkZWNyZW1lbnRhciBhdMOpIG8gdmFsb3IgMilcclxuICAgICAgICB9XHJcbiAgICAgICAgZHYgPSAwOyAvLyBTZWd1bmRvIGTDrWdpdG8gdmVyaWZpY2Fkb3IgKHNlcsOhIHplcm8gc2UgbyByZXN0byBkYSBkaXZpc8OjbyBkZSBzb21hIHBvciAxMSBmb3IgPCAyKVxyXG4gICAgICAgIGlmIChzb21hICUgMTEgPiAxKSB7XHJcbiAgICAgICAgICBkdiA9IDExIC0gKHNvbWEgJSAxMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwYXJzZUludChjbnBqLmNoYXJBdCgxMyksIDEwKSAhPT0gZHYpIHtcclxuICAgICAgICAgIHJldHVybiBJc1ZhbGlkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgSXNWYWxpZCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIElzVmFsaWQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcbn1cclxuIl19